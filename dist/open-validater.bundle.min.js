var validater=function(){"use strict";function e(e,r){for(var t=0;t<r.length;t++){var s=r[t];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n(s.key),s)}}function r(e,r,t){return(r=n(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function t(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);r&&(s=s.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,s)}return t}function s(e){for(var s=1;s<arguments.length;s++){var n=null!=arguments[s]?arguments[s]:{};s%2?t(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t(Object(n)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))}))}return e}function n(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var s=t.call(e,r||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}var a,o=function(){function r(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r)}return t=r,a=[{key:"addRule",value:function(e){if("string"!=typeof e.name||"function"!=typeof e.handle)return!1;var t={};t[e.name]=e.handle,r.rules=s(s({},r.rules),t)}},{key:"test",value:function(e,t){return new Promise((function(s,n){i.call(r,e).then((function(n){if(n.status){var a=!0,o={status:!0,name:e.name||"",message:"验证通过"},u=e.value,i=e.rules;for(var c in i){if(!i.required&&u&&!r.rules[c](u)){o.status=!1,o.message=i[c],a=!1;break}if(i.required&&!r.rules[c](u)){o.status=!1,o.message=i[c],a=!1;break}if(u&&!r.rules[c](u)){o.status=!1,o.message=i[c],a=!1;break}}if(a){if(e.error.message){var l=document.querySelector(e.error.message.id);l&&(l.innerText=""),l&&l.classList.contains(e.error.message.class)&&l.classList.remove(e.error.message.class)}if(e.error.input){var f=document.querySelector(e.error.input.id);f&&f.classList.contains(e.error.input.class)&&f.classList.remove(e.error.input.class)}}else if(e.error&&"[object Object]"==Object.prototype.toString.call(e.error)){if(e.error.message){var m=document.querySelector(e.error.message.id);m&&(m.innerText=o.message),m&&e.error.message.class&&m.classList.add(e.error.message.class)}if(e.error.input){var p=document.querySelector(e.error.input.id);p&&e.error.input.class&&p.classList.add(e.error.input.class),p.focus()}}"function"==typeof t&&t(o),s(o)}}))}))}},{key:"tests",value:function(e,t){return new Promise((function(s,n){for(var a=!0,o={status:!0,name:"",message:"验证通过"},u=0;u<e.length;u++){var i=e[u],c=i.value,l=i.rules;for(var f in o.name=i.name,l){if(!l.required&&c&&!r.rules[f](c)){o.status=!1,o.message=l[f],a=!1;break}if(l.required&&!r.rules[f](c)){o.status=!1,o.message=l[f],a=!1;break}if(c&&!r.rules[f](c)){o.status=!1,o.message=l[f],a=!1;break}}if(!a){if(i.error&&"[object Object]"==Object.prototype.toString.call(i.error)){if(i.error.message){var m=document.querySelector(i.error.message.id);m&&(m.innerText=o.message),m&&i.error.message.class&&m.classList.add(i.error.message.class)}if(i.error.input){var p=document.querySelector(i.error.input.id);p&&i.error.input.class&&p.classList.add(i.error.input.class),p.focus()}}break}if(i.error.message){var g=document.querySelector(i.error.message.id);g&&(g.innerText=""),g&&g.classList.contains(i.error.message.class)&&g.classList.remove(i.error.message.class)}if(i.error.input){var d=document.querySelector(i.error.input.id);d&&d.classList.contains(i.error.input.class)&&d.classList.remove(i.error.input.class)}}"function"==typeof t&&t(o),s(o)}))}}],(n=null)&&e(t.prototype,n),a&&e(t,a),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n,a}();function u(e){return!!e}function i(e){return new Promise((function(r,t){var s=c.call(a,e,"验证规则参数必须是object,当前参数类型不正确");s.status||r(s),"string"==typeof e.name&&c.call(a,e.rules).status||r({result:!1,message:"验证规则对象必须包含name属性和rules属性"}),r({status:!0})}))}function c(e,r,t){var s={status:!0,message:t};return"[object Object]"==Object.prototype.toString.call(e)||(s.status=!1),s}return a=o,r(o,"name","validater"),r(o,"author","kaijian"),r(o,"version","v1.0.0"),r(o,"description","基于js开发的表达验证插件"),r(o,"date","2024-06-12"),r(o,"rules",{required:function(e){var r=""==e||null==e||null==e;return!u.call(a,r)},phone:function(e){return u.call(a,/^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/.test(e))},http:function(e){return u.call(a,/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/.test(e))},email:function(e){return u.call(a,/^\w+([  -+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/g.test(e))},string:function(e){return u.call(a,/^[\u4e00-\u9fa5]*$/.test(e))},strEng:function(e){return u.call(a,/^[\u4e00-\u9fa5a-zA-Z]*$/.test(e))},strEngInt:function(e){return u.call(a,/^[\u4e00-\u9fa5a-zA-Z0-9]*$/.test(e))},engAndInt:function(e){return u.call(a,/^[a-zA-Z0-9]*$/.test(e))},engInt:function(e){return u.call(a,/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/.test(e))},tel:function(e){return u.call(a,/^\d{3}-\d{8}|\d{4}-\d{7,8}/.test(e))},symbol:function(e){return u.call(a,/[`~!@#$^&*()《》=|{}':;',\\\[\]\.<>\/?~！@#￥……&*（）——|{}【】'；：""'。，、？\s]/g.test(e))},password:function(e){return u.call(a,/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\da-zA-Z~!@#$%^&*]{8,16}$/.test(e))},text:function(e){return u.call(a,/^[\u4e00-\u9fa5a-zA-Z0-9,.!?:，。？！]*$/.test(e))},int:function(e){return u.call(a,/^[0-9]*$/g.test(e))}}),o}();
//# sourceMappingURL=open-validater.bundle.min.js.map
