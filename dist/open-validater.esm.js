var e,t,r;function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,u(n.key),n)}}function s(e,t,r){return(t=u(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(e=self.document)&&!e.getElementById("livereloadscript")&&((t=e.createElement("script")).async=1,t.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",t.id="livereloadscript",e.getElementsByTagName("head")[0].appendChild(t));var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}(e,null,[{key:"addRule",value:function(t){if("string"!=typeof t.name||"function"!=typeof t.handle)return!1;var r={};r[t.name]=t.handle,e.rules=o(o({},e.rules),r)}},{key:"test",value:function(t,r){return new Promise((function(n,s){c.call(e,t).then((function(s){if(s.status){var a=!0,o={status:!0,name:t.name||"",message:"验证通过"},u=t.value,i=t.rules;for(var l in i){if(!i.required&&u&&!e.rules[l](u)){o.status=!1,o.message=i[l],a=!1;break}if("required"==l&&!e.rules[l](u)){o.status=!1,o.message=i[l],a=!1;break}}if(!a&&t.error&&"[object Object]"==Object.prototype.toString.call(t.error)){if(t.error.message){var c=document.querySelector(t.error.message.id);c&&(c.innerText=o.message),c&&t.error.message.styles&&(c.style.cssText=t.error.message.styles)}if(t.error.input){var f=document.querySelector(t.error.input.id);f&&(f.innerText=o.message),f&&t.error.input.styles&&(f.style.cssText=t.error.input.styles)}}"function"==typeof r&&r(o),n(o)}}))}))}},{key:"tests",value:function(t,r){return new Promise((function(n,s){for(var a=!0,o={status:!0,name:"",message:"验证通过"},u=0;u<t.length;u++){var i=t[u],l=i.value,c=i.rules;for(var f in o.name=i.name,c){if(!c.required&&l&&!e.rules[f](l)){o.status=!1,o.message=c[f],a=!1;break}if("required"==f&&!e.rules[f](l)){o.status=!1,o.message=c[f],a=!1;break}}if(!a){if(i.error&&"[object Object]"==Object.prototype.toString.call(i.error)){if(i.error.message){var p=document.querySelector(i.error.message.id);p&&(p.innerText=o.message),p&&i.error.message.styles&&(p.style.cssText=i.error.message.styles)}if(i.error.input){var m=document.querySelector(i.error.input.id);m&&(m.innerText=o.message),m&&i.error.input.styles&&(m.style.cssText=i.error.input.styles)}}break}}"function"==typeof r&&r(o),n(o)}))}}])}();function l(e){return!!e}function c(e){return new Promise((function(t,n){var s=f.call(r,e,"验证规则参数必须是object,当前参数类型不正确");s.status||t(s),"string"==typeof e.name&&f.call(r,e.rules).status||t({result:!1,message:"验证规则对象必须包含name属性和rules属性"}),t({status:!0})}))}function f(e,t,r){var n={status:!0,message:r};return"[object Object]"==Object.prototype.toString.call(e)||(n.status=!1),n}r=i,s(i,"name","validater"),s(i,"author","kaijian"),s(i,"version","v1.0.0"),s(i,"description","基于js开发的表达验证插件"),s(i,"date","2024-06-12"),s(i,"rules",{required:function(e){var t=""==e||null==e||null==e;return!l.call(r,t)},phone:function(e){return l.call(r,/^1(3[0-9]|4[01456879]|5[0-35-9]|6[2567]|7[0-8]|8[0-9]|9[0-35-9])\d{8}$/.test(e))},http:function(e){return l.call(r,/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\*\+,;=.]+$/.test(e))},email:function(e){return l.call(r,/^\w+([  -+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/g.test(e))},string:function(e){return l.call(r,/^[\u4e00-\u9fa5]*$/.test(e))},strEng:function(e){return l.call(r,/^[\u4e00-\u9fa5a-zA-Z]*$/.test(e))},strEngInt:function(e){return l.call(r,/^[\u4e00-\u9fa5a-zA-Z0-9]*$/.test(e))},engAndInt:function(e){return l.call(r,/^[a-zA-Z0-9]*$/.test(e))},engInt:function(e){return l.call(r,/^[a-zA-Z]([-_a-zA-Z0-9]{5,19})+$/.test(e))},tel:function(e){return l.call(r,/^\d{3}-\d{8}|\d{4}-\d{7,8}/.test(e))},symbol:function(e){return l.call(r,/[`~!@#$^&*()《》=|{}':;',\\\[\]\.<>\/?~！@#￥……&*（）——|{}【】'；：""'。，、？\s]/g.test(e))},password:function(e){return l.call(r,/^(?=.*\d)(?=.*[a-zA-Z])(?=.*[~!@#$%^&*])[\da-zA-Z~!@#$%^&*]{8,16}$/.test(e))},text:function(e){return l.call(r,/^[\u4e00-\u9fa5a-zA-Z0-9,.!?:，。？！]*$/.test(e))},int:function(e){return l.call(r,/^[0-9]*$/g.test(e))}});export{i as default};
//# sourceMappingURL=open-validater.esm.js.map
